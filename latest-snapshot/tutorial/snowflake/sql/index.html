
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Apache Sedona&trade; is a cluster computing system for processing large-scale spatial data. Sedona extends existing cluster computing systems, such as Apache Spark, Apache Flink, and Snowflake, with a set of out-of-the-box distributed Spatial Datasets and Spatial SQL that efficiently load, process, and analyze large-scale spatial data across machines.">
      
      
      
        <link rel="canonical" href="https://sedona.apache.org/latest/tutorial/snowflake/sql/">
      
      
        <link rel="prev" href="../../flink/pyflink-sql/">
      
      
        <link rel="next" href="../../demo/">
      
      
      <link rel="icon" href="../../../image/sedona_logo_symbol.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Spatial SQL app (Snowflake) - Apache Sedona&trade;</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
  <meta name="google-site-verification" content="o2riomKLozYKc2IQivWGsrI2unuyQs7hXiAD4kGMCTQ" />

  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#accessing-sedona-functions-in-snowflake" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest stable version.
  <a href="../../../..">
    <strong>Click here to go to the latest stable version.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Apache Sedona&amp;trade;" class="md-header__button md-logo" aria-label="Apache Sedona&trade;" data-md-component="logo">
      
  <img src="../../../image/sedona_logo_symbol_white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Apache Sedona&trade;
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Spatial SQL app (Snowflake)
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/apache/sedona" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    apache/sedona
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../setup/overview/" class="md-tabs__link">
          
  
  
  Setup

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../download/" class="md-tabs__link">
        
  
  
    
  
  Download

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../sql/" class="md-tabs__link">
          
  
  
  Programming Guides

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../api/sql/Overview/" class="md-tabs__link">
          
  
  
  API Docs

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../blog/" class="md-tabs__link">
        
  
  
    
  
  Blog

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../community/contact/" class="md-tabs__link">
          
  
  
  Community

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../asf/asf/" class="md-tabs__link">
          
  
  
  Apache Software Foundation

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Apache Sedona&amp;trade;" class="md-nav__button md-logo" aria-label="Apache Sedona&trade;" data-md-component="logo">
      
  <img src="../../../image/sedona_logo_symbol_white.svg" alt="logo">

    </a>
    Apache Sedona&trade;
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/apache/sedona" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    apache/sedona
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Setup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Supported platforms
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Supported platforms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_2_1" id="__nav_2_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sedona with Apache Spark
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1">
            <span class="md-nav__icon md-icon"></span>
            Sedona with Apache Spark
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/platform/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Language wrappers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2_2" id="__nav_2_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sedona with Apache Flink
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            Sedona with Apache Flink
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/flink/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/flink/platform/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Language wrappers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_2_3" id="__nav_2_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sedona with Snowflake
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_3">
            <span class="md-nav__icon md-icon"></span>
            Sedona with Snowflake
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/snowflake/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/maven-coordinates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maven Central coordinate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Install with Apache Spark
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Install with Apache Spark
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/install-scala/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install Sedona Scala/Java
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/install-python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install Sedona Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/rdocs" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install Sedona R
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/zeppelin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install Sedona-Zeppelin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Play Sedona in Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/wherobots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install on Wherobots
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/databricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install on Databricks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/emr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install on AWS EMR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/glue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install on AWS Glue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/fabric/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install on Microsoft Fabric
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Set up Spark cluster manually
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/azure-synapse-analytics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install on Azure Synapse Analytics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Install with Apache Flink
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Install with Apache Flink
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/flink/install-scala/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install Sedona Scala/Java
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/flink/install-python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install Sedona Python
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Install with Snowflake
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Install with Snowflake
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/snowflake/install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install Sedona SQL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/release-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release notes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/compile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compile the code
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../download/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Download
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Programming Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Programming Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sedona with Apache Spark
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Sedona with Apache Spark
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spatial SQL app
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../raster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raster SQL app
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql-pure-sql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pure SQL environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rdd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spatial RDD app
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/rdocs" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sedona R
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../geopandas-shapely/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Work with GeoPandas and Shapely
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_7" >
        
          
          <label class="md-nav__link" for="__nav_4_1_7" id="__nav_4_1_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Files
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_7">
            <span class="md-nav__icon md-icon"></span>
            Files
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../files/csv-geometry-sedona-spark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CSV
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../files/geopackage-sedona-spark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GeoPackage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../files/geoparquet-sedona-spark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GeoParquet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../files/geojson-sedona-spark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GeoJSON
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../files/shapefiles-sedona-spark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shapefiles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../files/stac-sedona-spark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    STAC catalog
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_8" >
        
          
          <label class="md-nav__link" for="__nav_4_1_8" id="__nav_4_1_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_8">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/spatial-joins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spatial Joins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/clustering-algorithms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clustering Algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/distance-spark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distance
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_9" >
        
          
          <label class="md-nav__link" for="__nav_4_1_9" id="__nav_4_1_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Map visualization SQL app
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_9">
            <span class="md-nav__icon md-icon"></span>
            Map visualization SQL app
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../viz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scala/Java
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../zeppelin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use Apache Zeppelin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../viz-gallery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gallery
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_10" >
        
          
          <label class="md-nav__link" for="__nav_4_1_10" id="__nav_4_1_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Performance tuning
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_10">
            <span class="md-nav__icon md-icon"></span>
            Performance tuning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benchmark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Benchmark
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced-Tutorial-Tune-your-Application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tune RDD application
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storing-blobs-in-parquet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storing large raster geometries in Parquet files
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sedona with Apache Flink
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Sedona with Apache Flink
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../flink/sql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spatial SQL app (Flink)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../flink/pyflink-sql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spatial SQL app (PyFlink)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sedona with Snowflake
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Sedona with Snowflake
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Spatial SQL app (Snowflake)
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Spatial SQL app (Snowflake)
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#accessing-sedona-functions-in-snowflake" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing Sedona functions in snowflake
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-sample-table" class="md-nav__link">
    <span class="md-ellipsis">
      Create a sample table
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-geometrygeography-column" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Geometry/Geography column
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-the-lonlat-order" class="md-nav__link">
    <span class="md-ellipsis">
      Check the lon/lat order
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#save-as-an-ordinary-column" class="md-nav__link">
    <span class="md-ellipsis">
      Save as an ordinary column
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transform-the-coordinate-reference-system" class="md-nav__link">
    <span class="md-ellipsis">
      Transform the Coordinate Reference System
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#range-query" class="md-nav__link">
    <span class="md-ellipsis">
      Range query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#knn-query" class="md-nav__link">
    <span class="md-ellipsis">
      KNN query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#range-join-query" class="md-nav__link">
    <span class="md-ellipsis">
      Range join query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#distance-join" class="md-nav__link">
    <span class="md-ellipsis">
      Distance join
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#google-s2-based-approximate-equi-join" class="md-nav__link">
    <span class="md-ellipsis">
      Google S2 based approximate equi-join
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Google S2 based approximate equi-join">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-generate-s2-ids-for-both-tables" class="md-nav__link">
    <span class="md-ellipsis">
      1. Generate S2 ids for both tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-perform-equi-join" class="md-nav__link">
    <span class="md-ellipsis">
      2. Perform equi-join
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-optional-refine-the-result" class="md-nav__link">
    <span class="md-ellipsis">
      3. Optional: Refine the result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-optional-de-duplicate" class="md-nav__link">
    <span class="md-ellipsis">
      4. Optional: De-duplicate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-putting-it-all-together" class="md-nav__link">
    <span class="md-ellipsis">
      5. Putting it all together
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s2-for-distance-join" class="md-nav__link">
    <span class="md-ellipsis">
      S2 for distance join
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-that-are-only-available-in-sedona" class="md-nav__link">
    <span class="md-ellipsis">
      Functions that are only available in Sedona
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interoperate-with-snowflake-native-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Interoperate with Snowflake native functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Interoperate with Snowflake native functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geometries-created-by-sedona-geometry-constructors" class="md-nav__link">
    <span class="md-ellipsis">
      Geometries created by Sedona Geometry constructors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geometry-geography-created-by-snowflake-geometry-geography-constructors" class="md-nav__link">
    <span class="md-ellipsis">
      Geometry / Geography created by Snowflake Geometry / Geography constructors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Known issues
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scala/Java
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../jupyter-notebook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Docs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Docs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sedona with Apache Spark
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Sedona with Apache Spark
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1_1" id="__nav_5_1_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    SQL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_1">
            <span class="md-nav__icon md-icon"></span>
            SQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick start
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1_2" >
        
          
          <label class="md-nav__link" for="__nav_5_1_1_2" id="__nav_5_1_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Vector data
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_1_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_1_2">
            <span class="md-nav__icon md-icon"></span>
            Vector data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Constructor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constructor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Function/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Function
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Predicate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Predicate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/AggregateFunction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aggregate function
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/DataFrameAPI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DataFrame Style functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Optimizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query optimization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/NearestNeighbourSearching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nearest-Neighbour searching
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Spider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spider:Spatial Data Generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Reading-legacy-parquet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reading Legacy Parquet Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1_2_10" >
        
          
          <label class="md-nav__link" for="__nav_5_1_1_2_10" id="__nav_5_1_1_2_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Visualization
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_5_1_1_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_1_2_10">
            <span class="md-nav__icon md-icon"></span>
            Visualization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Visualization-SedonaPyDeck/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SedonaPyDeck
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Visualization-SedonaKepler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SedonaKepler
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1_3" >
        
          
          <label class="md-nav__link" for="__nav_5_1_1_3" id="__nav_5_1_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Raster data
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_1_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_1_3">
            <span class="md-nav__icon md-icon"></span>
            Raster data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Raster-loader/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raster loader
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Raster-aggregate-function/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raster aggregates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Raster-writer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raster writer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Raster-operators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raster operators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Raster-map-algebra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raster map algebra
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Raster-visualizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raster visualization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Raster-affine-transformation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raster affine transformation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/sql/Parameter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parameter
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_2" >
        
          
          <label class="md-nav__link" for="__nav_5_1_2" id="__nav_5_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    RDD (core)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_2">
            <span class="md-nav__icon md-icon"></span>
            RDD (core)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/java-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scala/Java doc
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_3" >
        
          
          <label class="md-nav__link" for="__nav_5_1_3" id="__nav_5_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Stats
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_3">
            <span class="md-nav__icon md-icon"></span>
            Stats
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/stats/sql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DataFrame
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_4" >
        
          
          <label class="md-nav__link" for="__nav_5_1_4" id="__nav_5_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Viz
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_4">
            <span class="md-nav__icon md-icon"></span>
            Viz
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/viz/sql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DataFrame/SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/viz/java-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RDD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/rdocs" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sedona R
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sedona with Apache Flink
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Sedona with Apache Flink
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_1" >
        
          
          <label class="md-nav__link" for="__nav_5_2_1" id="__nav_5_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    SQL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_1">
            <span class="md-nav__icon md-icon"></span>
            SQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/flink/Overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview (Flink)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/flink/Constructor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constructor (Flink)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/flink/Function/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Function (Flink)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/flink/Aggregator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aggregator (Flink)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/flink/Predicate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Predicate (Flink)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sedona with Snowflake
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Sedona with Snowflake
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_1" >
        
          
          <label class="md-nav__link" for="__nav_5_3_1" id="__nav_5_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    SQL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_1">
            <span class="md-nav__icon md-icon"></span>
            SQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/snowflake/vector-data/Overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview (Snowflake)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/snowflake/vector-data/Constructor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constructor (Snowflake)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/snowflake/vector-data/Function/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Function (Snowflake)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/snowflake/vector-data/AggregateFunction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aggregate Function (Snowflake)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/snowflake/vector-data/Predicate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Predicate (Snowflake)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Community
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Community
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Community
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Contributor Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            Contributor Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/rule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/develop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Develop
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Committer Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            Committer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/contributor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Management Committee
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/release-manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Become a release manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/snapshot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Publish a snapshot version
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/publish/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Make a release
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/vote/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vote a release
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/publication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Publications
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Apache Software Foundation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Apache Software Foundation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../asf/asf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Foundation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.apache.org/licenses/" target="_blank" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.apache.org/events/current-event" target="_blank" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sponsorship
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.apache.org/foundation/thanks.html" target="_blank" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Thanks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.apache.org/security/" target="_blank" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Privacy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../asf/telemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Telemetry
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#accessing-sedona-functions-in-snowflake" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing Sedona functions in snowflake
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-sample-table" class="md-nav__link">
    <span class="md-ellipsis">
      Create a sample table
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-geometrygeography-column" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Geometry/Geography column
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-the-lonlat-order" class="md-nav__link">
    <span class="md-ellipsis">
      Check the lon/lat order
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#save-as-an-ordinary-column" class="md-nav__link">
    <span class="md-ellipsis">
      Save as an ordinary column
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transform-the-coordinate-reference-system" class="md-nav__link">
    <span class="md-ellipsis">
      Transform the Coordinate Reference System
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#range-query" class="md-nav__link">
    <span class="md-ellipsis">
      Range query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#knn-query" class="md-nav__link">
    <span class="md-ellipsis">
      KNN query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#range-join-query" class="md-nav__link">
    <span class="md-ellipsis">
      Range join query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#distance-join" class="md-nav__link">
    <span class="md-ellipsis">
      Distance join
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#google-s2-based-approximate-equi-join" class="md-nav__link">
    <span class="md-ellipsis">
      Google S2 based approximate equi-join
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Google S2 based approximate equi-join">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-generate-s2-ids-for-both-tables" class="md-nav__link">
    <span class="md-ellipsis">
      1. Generate S2 ids for both tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-perform-equi-join" class="md-nav__link">
    <span class="md-ellipsis">
      2. Perform equi-join
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-optional-refine-the-result" class="md-nav__link">
    <span class="md-ellipsis">
      3. Optional: Refine the result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-optional-de-duplicate" class="md-nav__link">
    <span class="md-ellipsis">
      4. Optional: De-duplicate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-putting-it-all-together" class="md-nav__link">
    <span class="md-ellipsis">
      5. Putting it all together
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s2-for-distance-join" class="md-nav__link">
    <span class="md-ellipsis">
      S2 for distance join
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-that-are-only-available-in-sedona" class="md-nav__link">
    <span class="md-ellipsis">
      Functions that are only available in Sedona
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interoperate-with-snowflake-native-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Interoperate with Snowflake native functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Interoperate with Snowflake native functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geometries-created-by-sedona-geometry-constructors" class="md-nav__link">
    <span class="md-ellipsis">
      Geometries created by Sedona Geometry constructors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geometry-geography-created-by-snowflake-geometry-geography-constructors" class="md-nav__link">
    <span class="md-ellipsis">
      Geometry / Geography created by Snowflake Geometry / Geography constructors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Known issues
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
  
    
                  


  
    <a href="https://github.com/apache/sedona/edit/master/docs/tutorial/snowflake/sql.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


  <h1>Spatial SQL app (Snowflake)</h1>

<!--
 Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.
 -->

<p>After the installation done, you can start using Sedona functions. Please log in to Snowflake again using the user that has the privilege to access the database.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please always keep the schema name <code>SEDONA</code> (e.g., <code>SEDONA.ST_GeomFromWKT</code>) when you use Sedona functions to avoid conflicting with Snowflake's built-in functions.</p>
</div>
<h2 id="accessing-sedona-functions-in-snowflake">Accessing Sedona functions in snowflake<a class="headerlink" href="#accessing-sedona-functions-in-snowflake" title="Permanent link">&para;</a></h2>
<p>First make sure to point to the correct functions. By default, the Sedona functions should be accessible in db.schema <code>SEDONASNOW.SEDONA</code>.</p>
<div class="highlight"><pre><span></span><code><span class="n">USE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">SEDONASNOW</span><span class="p">;</span>
</code></pre></div>
<p>Alternatively, use another database and specify the fully qualified name e.g. <code>SEDONASNOW.SEDONA.ST_GeomFromText</code></p>
<h2 id="create-a-sample-table">Create a sample table<a class="headerlink" href="#create-a-sample-table" title="Permanent link">&para;</a></h2>
<p>Let's create a <code>city_tbl</code> that contains the locations and names of cities. Each location is a WKT string.</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">city_tbl</span><span class="w"> </span><span class="p">(</span><span class="n">wkt</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span><span class="w"> </span><span class="n">city_name</span><span class="w"> </span><span class="n">STRING</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">city_tbl</span><span class="p">(</span><span class="n">wkt</span><span class="p">,</span><span class="w"> </span><span class="n">city_name</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;POINT (-122.33 47.61)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Seattle&#39;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">city_tbl</span><span class="p">(</span><span class="n">wkt</span><span class="p">,</span><span class="w"> </span><span class="n">city_name</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;POINT (-122.42 37.76)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;San Francisco&#39;</span><span class="p">);</span>
</code></pre></div>
<p>Then we can show the content of this table:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">city_tbl</span><span class="p">;</span>
</code></pre></div>
<p>Output:</p>
<div class="highlight"><pre><span></span><code>WKT CITY_NAME
POINT (-122.33 47.61)   Seattle
POINT (-122.42 37.76)   San Francisco
</code></pre></div>
<h2 id="create-a-geometrygeography-column">Create a Geometry/Geography column<a class="headerlink" href="#create-a-geometrygeography-column" title="Permanent link">&para;</a></h2>
<p>All geometrical operations in SedonaSQL are on Geometry/Geography type objects. Therefore, before any kind of queries, you need to create a Geometry/Geography type column on the table.</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">city_tbl_geom</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_GeomFromWKT</span><span class="p">(</span><span class="n">wkt</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="n">city_name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">city_tbl</span>
</code></pre></div>
<p>The <code>geom</code> column Table <code>city_tbl_geom</code> is now in a <code>Binary</code> type and data in this column is in a format that can be understood by Sedona. The output of this query will show geometries in WKB binary format like this:</p>
<div class="highlight"><pre><span></span><code>GEOM CITY_NAME
010100000085eb51b81e955ec0ae47e17a14ce4740  Seattle
01010000007b14ae47e19a5ec0e17a14ae47e14240  San Francisco
</code></pre></div>
<p>To view the content of this column in a human-readable format, you can use <code>SEDONA.ST_AsText</code>. For example,</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_AsText</span><span class="p">(</span><span class="n">geom</span><span class="p">),</span><span class="w"> </span><span class="n">city_name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">city_tbl_geom</span>
</code></pre></div>
<p>Alternatively, you can also create Snowflake native Geometry and Geography type columns. For example, you can create a Snowflake native Geometry type column as follows (note the function has no <code>SEDONA</code> prefix):</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">city_tbl_geom</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">ST_GeometryFromWKT</span><span class="p">(</span><span class="n">wkt</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="n">city_name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">city_tbl</span>
</code></pre></div>
<p>The following code creates a Snowflake native Geography type column (note the function has no <code>SEDONA</code> prefix):</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">city_tbl_geom</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">ST_GeographyFromWKT</span><span class="p">(</span><span class="n">wkt</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="n">city_name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">city_tbl</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>SedonaSQL provides lots of functions to create a Geometry column, please read <a href="../../../api/snowflake/vector-data/Constructor/">SedonaSQL API</a>.</p>
</div>
<h2 id="check-the-lonlat-order">Check the lon/lat order<a class="headerlink" href="#check-the-lonlat-order" title="Permanent link">&para;</a></h2>
<p>In SedonaSnow <code>v1.4.1</code> and before, we use lat/lon order in the following functions:</p>
<ul>
<li>SEDONA.ST_Transform</li>
<li>SEDONA.ST_DistanceSphere</li>
<li>SEDONA.ST_DistanceSpheroid</li>
</ul>
<p>We use <code>lon/lat</code> order in the following functions:</p>
<ul>
<li>SEDONA.ST_GeomFromGeoHash</li>
<li>SEDONA.ST_GeoHash</li>
<li>SEDONA.ST_S2CellIDs</li>
</ul>
<p>In Sedona <code>v1.5.0</code> and above, all functions will be fixed to lon/lat order.</p>
<p>If your original data is not in the order you want, you need to flip the coordinate using <code>SEDONA.ST_FlipCoordinates(geom: Geometry)</code>.</p>
<p>The sample data used above is in lon/lat order, we can flip the coordinates as follows:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">city_tbl_geom</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_FlipCoordinates</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="n">city_name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">city_tbl_geom</span>
</code></pre></div>
<p>If we show the content of this table, it is now in lat/lon order:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_AsText</span><span class="p">(</span><span class="n">geom</span><span class="p">),</span><span class="w"> </span><span class="n">city_name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">city_tbl_geom</span>
</code></pre></div>
<p>Output:</p>
<div class="highlight"><pre><span></span><code>GEOM    CITY_NAME
POINT (47.61 -122.33)   Seattle
POINT (37.76 -122.42)   San Francisco
</code></pre></div>
<h2 id="save-as-an-ordinary-column">Save as an ordinary column<a class="headerlink" href="#save-as-an-ordinary-column" title="Permanent link">&para;</a></h2>
<p>To save a table to some permanent storage, you can simply convert each geometry in the Geometry type column back to a plain String and save it anywhere you want.</p>
<p>Use the following code to convert the Geometry column in a table back to a WKT string column:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_AsText</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">city_tbl_geom</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>SedonaSQL provides lots of functions to save the Geometry column, please read <a href="../../../api/snowflake/vector-data/Function/">SedonaSQL API</a>.</p>
</div>
<h2 id="transform-the-coordinate-reference-system">Transform the Coordinate Reference System<a class="headerlink" href="#transform-the-coordinate-reference-system" title="Permanent link">&para;</a></h2>
<p>Sedona doesn't control the coordinate unit (degree-based or meter-based) of all geometries in a Geometry column. The unit of all related distances in SedonaSQL is same as the unit of all geometries in a Geometry column.</p>
<p>To convert Coordinate Reference System of the Geometry column created before, use <code>SEDONA.ST_Transform (A:geometry, SourceCRS:string, TargetCRS:string)</code></p>
<p>The first EPSG code EPSG:4326 in <code>SEDONA.ST_Transform</code> is the source CRS of the geometries. It is WGS84, the most common degree-based CRS.</p>
<p>The second EPSG code EPSG:3857 in <code>SEDONA.ST_Transform</code> is the target CRS of the geometries. It is the most common meter-based CRS.</p>
<p>This <code>SEDONA.ST_Transform</code> transform the CRS of these geometries from EPSG:4326 to EPSG:3857. The details CRS information can be found on <a href="https://epsg.io/">EPSG.io</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function follows lon/order in 1.5.0+ and lat/lon order in 1.4.1 and before. You can use <code>SEDONA.ST_FlipCoordinates</code> to swap X and Y.</p>
</div>
<p>We can transform our sample data as follows</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_AsText</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_Transform</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;epsg:4326&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;epsg:3857&#39;</span><span class="p">)),</span><span class="w"> </span><span class="n">city_name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">city_tbl_geom</span>
</code></pre></div>
<p>The output will be like this:</p>
<div class="highlight"><pre><span></span><code>POINT (6042216.250411431 -13617713.308741156)  Seattle
POINT (4545577.120361927 -13627732.06291255)  San Francisco
</code></pre></div>
<p><code>SEDONA.ST_Transform</code> also supports the CRS string in OGC WKT format. For example, the following query generates the same output but with a OGC WKT CRS string.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_AsText</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_Transform</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;epsg:4326&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;PROJCS[&quot;WGS 84 / Pseudo-Mercator&quot;,</span>
<span class="s1">     GEOGCS[&quot;WGS 84&quot;,</span>
<span class="s1">         DATUM[&quot;WGS_1984&quot;,</span>
<span class="s1">             SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,</span>
<span class="s1">                 AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],</span>
<span class="s1">             AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],</span>
<span class="s1">         PRIMEM[&quot;Greenwich&quot;,0,</span>
<span class="s1">             AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],</span>
<span class="s1">         UNIT[&quot;degree&quot;,0.0174532925199433,</span>
<span class="s1">             AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],</span>
<span class="s1">         AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],</span>
<span class="s1">     PROJECTION[&quot;Mercator_1SP&quot;],</span>
<span class="s1">     PARAMETER[&quot;central_meridian&quot;,0],</span>
<span class="s1">     PARAMETER[&quot;scale_factor&quot;,1],</span>
<span class="s1">     PARAMETER[&quot;false_easting&quot;,0],</span>
<span class="s1">     PARAMETER[&quot;false_northing&quot;,0],</span>
<span class="s1">     UNIT[&quot;metre&quot;,1,</span>
<span class="s1">         AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],</span>
<span class="s1">     AXIS[&quot;Easting&quot;,EAST],</span>
<span class="s1">     AXIS[&quot;Northing&quot;,NORTH],</span>
<span class="s1">     EXTENSION[&quot;PROJ4&quot;,&quot;+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs&quot;],</span>
<span class="s1">     AUTHORITY[&quot;EPSG&quot;,&quot;3857&quot;]]&#39;</span><span class="p">)),</span><span class="w"> </span><span class="n">city_name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">city_tbl_geom</span>
</code></pre></div>
<h2 id="range-query">Range query<a class="headerlink" href="#range-query" title="Permanent link">&para;</a></h2>
<p>Use <mark>SEDONA.ST_Contains</mark>, <mark>SEDONA.ST_Intersects</mark>, <mark>SEDONA.ST_Within</mark> to run a range query over a single column.</p>
<p>The following example finds all geometries that are within the given polygon:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">city_tbl_geom</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_Contains</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_PolygonFromEnvelope</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="mi">1100</span><span class="p">.</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">geom</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Read <a href="../../../api/snowflake/vector-data/Constructor/">SedonaSQL API</a> to learn how to create a Geometry type query window.</p>
</div>
<h2 id="knn-query">KNN query<a class="headerlink" href="#knn-query" title="Permanent link">&para;</a></h2>
<p>Use <mark>SEDONA.ST_Distance</mark>, <mark>SEDONA.ST_DistanceSphere</mark>, <mark>ST_DistanceSpheroid</mark> to calculate the distance and rank the distance.</p>
<p>The following code returns the 5 nearest neighbor of the given point.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_Distance</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_Point</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">geom</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">distance</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">city_tbl_geom</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="k">DESC</span>
<span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span>
</code></pre></div>
<h2 id="range-join-query">Range join query<a class="headerlink" href="#range-join-query" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Sedona range join in Snowflake does not trigger Sedona's optimized spatial join algorithm while Sedona Spark does. It uses Snowflake's default Cartesian join which is very slow. Therefore, it is recommended to use Sedona's S2-based join or Snowflake's native ST functions + native <code>Geography</code> type to do range join, which will trigger Snowflake's <code>GeoJoin</code> algorithm.</p>
</div>
<p>Introduction: Find geometries from A and geometries from B such that each geometry pair satisfies a certain predicate.</p>
<p>Example:</p>
<p>Create the illustrative tables:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">polygondf</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="s1">&#39;POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">polygonshape</span><span class="p">;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">pointdf</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="s1">&#39;POINT(0.5 0.5)&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">pointshape</span><span class="p">;</span>
</code></pre></div>
<p>Now run the following queries with different spatial predicates:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">polygondf</span><span class="p">,</span><span class="w"> </span><span class="n">pointdf</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_Contains</span><span class="p">(</span><span class="n">polygondf</span><span class="p">.</span><span class="n">polygonshape</span><span class="p">,</span><span class="n">pointdf</span><span class="p">.</span><span class="n">pointshape</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">polygondf</span><span class="p">,</span><span class="w"> </span><span class="n">pointdf</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_Intersects</span><span class="p">(</span><span class="n">polygondf</span><span class="p">.</span><span class="n">polygonshape</span><span class="p">,</span><span class="n">pointdf</span><span class="p">.</span><span class="n">pointshape</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">pointdf</span><span class="p">,</span><span class="w"> </span><span class="n">polygondf</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_Within</span><span class="p">(</span><span class="n">pointdf</span><span class="p">.</span><span class="n">pointshape</span><span class="p">,</span><span class="w"> </span><span class="n">polygondf</span><span class="p">.</span><span class="n">polygonshape</span><span class="p">)</span>
</code></pre></div>
<p>The corresponding (faster) spatial joins use only native Snowflake functions:</p>
<div class="highlight"><pre><span></span><code><span class="k">WITH</span><span class="w"> </span><span class="n">polygondf</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="s1">&#39;POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">polygonshape</span>
<span class="p">),</span>
<span class="n">pointdf</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="s1">&#39;POINT(0.5 0.5)&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">pointshape</span>
<span class="p">)</span>
<span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">polygondf</span><span class="p">,</span><span class="w"> </span><span class="n">pointdf</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">ST_Contains</span><span class="p">(</span><span class="n">polygondf</span><span class="p">.</span><span class="n">polygonshape</span><span class="p">,</span><span class="n">pointdf</span><span class="p">.</span><span class="n">pointshape</span><span class="p">)</span>
</code></pre></div>
<p>This also work natively with other predicates like <code>ST_Intersects</code> and <code>ST_Within</code>.</p>
<h2 id="distance-join">Distance join<a class="headerlink" href="#distance-join" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Sedona distance join in Snowflake does not trigger Sedona's optimized spatial join algorithm while Sedona Spark does. It uses Snowflake's default Cartesian join which is very slow. Therefore, it is recommended to use Sedona's S2-based join or Snowflake's native ST functions + native <code>Geography</code> type to do range join, which will trigger Snowflake's <code>GeoJoin</code> algorithm.</p>
</div>
<p>Introduction: Find geometries from A and geometries from B such that the distance of each geometry pair is less or equal than a certain distance. It supports the planar Euclidean distance calculators <code>SEDONA.ST_Distance</code>, <code>SEDONA.ST_HausdorffDistance</code>, <code>SEDONA.ST_FrechetDistance</code> and the meter-based geodesic distance calculators <code>SEDONA.ST_DistanceSpheroid</code> and <code>SEDONA.ST_DistanceSphere</code>. Snowflake only natively supports <code>ST_Distance</code>.</p>
<p>First create two new illustrative tables with a single geometry.</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">pointdf2</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="s1">&#39;POINT(0 0)&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">pointshape</span><span class="p">;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">polygondf2</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="s1">&#39;POLYGON((0.5 0.5, 0.5 1, 1 1, 1 0.5, 0.5 0.5))&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">polygonshape</span><span class="p">;</span>
</code></pre></div>
<p>Examples for planar Euclidean distances:</p>
<p>The usual l2 Euclidean distance between <code>POINT(0 0)</code> and <code>POINT(0.5 0.5)</code> points is the square root of 0.5, so the following returns the single pair of points.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">pointdf</span><span class="p">,</span><span class="w"> </span><span class="n">pointdf2</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_Distance</span><span class="p">(</span><span class="n">pointdf</span><span class="p">.</span><span class="n">pointshape</span><span class="p">,</span><span class="n">pointdf2</span><span class="p">.</span><span class="n">pointshape</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">sqrt</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div>
<p>The l2 distance between two polygons that are not disjoint is 0, so the following returns the single polygon pair  </p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">polygondf</span><span class="p">,</span><span class="w"> </span><span class="n">polygondf2</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_Distance</span><span class="p">(</span><span class="n">polygondf</span><span class="p">.</span><span class="n">polygonshape</span><span class="p">,</span><span class="n">polygondf2</span><span class="p">.</span><span class="n">polygonshape</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span>
</code></pre></div>
<p>This is not necessarily the case of the Hausdorff or Frchet distances. The following queries return no rows:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">polygondf</span><span class="p">,</span><span class="w"> </span><span class="n">polygondf2</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_HausdorffDistance</span><span class="p">(</span><span class="n">polygondf</span><span class="p">.</span><span class="n">polygonshape</span><span class="p">,</span><span class="w"> </span><span class="n">polygondf2</span><span class="p">.</span><span class="n">polygonshape</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">polygondf</span><span class="p">,</span><span class="w"> </span><span class="n">polygondf2</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_FrechetDistance</span><span class="p">(</span><span class="n">polygondf</span><span class="p">.</span><span class="n">polygonshape</span><span class="p">,</span><span class="w"> </span><span class="n">polygondf2</span><span class="p">.</span><span class="n">polygonshape</span><span class="p">)</span><span class="w">  </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span>
</code></pre></div>
<p>Note that only the Hausdorff distance takes in a third <code>densityFraction</code> parameter in <span class="arithmatex"><span class="MathJax_Preview">(0,1]</span><script type="math/tex">(0,1]</script></span> with smaller values giving more accurate results.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you use planar Euclidean distance functions like <code>SEDONA.ST_Distance</code>, <code>SEDONA.ST_HausdorffDistance</code> or <code>SEDONA.ST_FrechetDistance</code> as the predicate, Sedona doesn't control the distance's unit (degree or meter). It is same with the geometry. If your coordinates are in the longitude and latitude system, the unit of <code>distance</code> should be degree instead of meter or mile. To change the geometry's unit, please either transform the coordinate reference system to a meter-based system. See <a href="../../../api/snowflake/vector-data/Function/#st_transform">SEDONA.ST_Transform</a>. If you don't want to transform your data, please consider using <code>SEDONA.ST_DistanceSpheroid</code> or <code>SEDONA.ST_DistanceSphere</code>.</p>
</div>
<p>For instance, the following returns roughly 78.45 kilometers, since the geometries are assumed to be in degrees of longitude and latitude, even if no CRS was explicitly set.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_DistanceSpheroid</span><span class="p">(</span><span class="n">pointdf</span><span class="p">.</span><span class="n">pointshape</span><span class="p">,</span><span class="n">pointdf2</span><span class="p">.</span><span class="n">pointshape</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">pointdf</span><span class="p">,</span><span class="w"> </span><span class="n">pointdf2</span>
</code></pre></div>
<p>As the following query illustrates, running Snowflake's native <code>ST_DISTANCE</code> on <code>GEOGRAPHY</code> objects will return a result similar to <code>SEDONA.ST_DistanceSphere</code> and <code>SEDONA.ST_DistanceSpheroid</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span>
<span class="w">    </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_DistanceSphere</span><span class="p">(</span>
<span class="w">        </span><span class="n">pointdf</span><span class="p">.</span><span class="n">pointshape</span><span class="p">,</span>
<span class="w">        </span><span class="n">pointdf2</span><span class="p">.</span><span class="n">pointshape</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">SEDONA_ST_DistanceSphere</span><span class="p">,</span>
<span class="w">    </span><span class="c1">--</span>
<span class="w">    </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_DistanceSpheroid</span><span class="p">(</span>
<span class="w">        </span><span class="n">pointdf</span><span class="p">.</span><span class="n">pointshape</span><span class="p">,</span>
<span class="w">        </span><span class="n">pointdf2</span><span class="p">.</span><span class="n">pointshape</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">SEDONA_ST_DistanceSpheroid</span><span class="p">,</span>
<span class="w">    </span><span class="c1">--</span>
<span class="w">    </span><span class="n">ST_DISTANCE</span><span class="p">(</span>
<span class="w">        </span><span class="n">TO_GEOGRAPHY</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">st_astext</span><span class="p">(</span><span class="n">pointdf</span><span class="p">.</span><span class="n">pointshape</span><span class="p">)),</span>
<span class="w">        </span><span class="n">TO_GEOGRAPHY</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">st_astext</span><span class="p">(</span><span class="n">pointdf2</span><span class="p">.</span><span class="n">pointshape</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="n">SFKL_ST_DISTANCE</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">pointdf</span><span class="p">,</span><span class="w"> </span><span class="n">pointdf2</span>
</code></pre></div>
<p>Output:</p>
<table>
<thead>
<tr>
<th>SEDONA_ST_DISTANCESPHERE</th>
<th>SEDONA_ST_DISTANCESPHEROID</th>
<th>SFKL_ST_DISTANCE</th>
</tr>
</thead>
<tbody>
<tr>
<td>78626.28640698</td>
<td>78451.248031239</td>
<td>78626.311089506</td>
</tr>
</tbody>
</table>
<h2 id="google-s2-based-approximate-equi-join">Google S2 based approximate equi-join<a class="headerlink" href="#google-s2-based-approximate-equi-join" title="Permanent link">&para;</a></h2>
<p>You can use Sedona's built-in Google S2 functions to perform an approximate equi-join. This algorithm leverages Snowflake's internal equi-join algorithm and might be performant given that you can opt to skip the refinement step  by sacrificing query accuracy. Sedona's S2 functions are a nice complement to Snowflake's native H3 and Geohash functions.</p>
<p>Please use the following steps:</p>
<h3 id="1-generate-s2-ids-for-both-tables">1. Generate S2 ids for both tables<a class="headerlink" href="#1-generate-s2-ids-for-both-tables" title="Permanent link">&para;</a></h3>
<p>Use <a href="../../../api/snowflake/vector-data/Function/#st_s2cellids">SEDONA.ST_S2CellIds</a> to generate cell IDs. Each geometry may produce one or more IDs.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">lefts</span><span class="p">,</span><span class="w"> </span><span class="k">TABLE</span><span class="p">(</span><span class="n">FLATTEN</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_S2CellIDs</span><span class="p">(</span><span class="n">lefts</span><span class="p">.</span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">)))</span><span class="w"> </span><span class="n">s1</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">rights</span><span class="p">,</span><span class="w"> </span><span class="k">TABLE</span><span class="p">(</span><span class="n">FLATTEN</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_S2CellIDs</span><span class="p">(</span><span class="n">rights</span><span class="p">.</span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">)))</span><span class="w"> </span><span class="n">s2</span>
</code></pre></div>
<h3 id="2-perform-equi-join">2. Perform equi-join<a class="headerlink" href="#2-perform-equi-join" title="Permanent link">&para;</a></h3>
<p>Join the two tables by their S2 cellId</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">lcs</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">lcs_id</span><span class="p">,</span><span class="w"> </span><span class="n">lcs</span><span class="p">.</span><span class="n">geom</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">lcs_geom</span><span class="p">,</span><span class="w"> </span><span class="n">lcs</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">lcs_name</span><span class="p">,</span><span class="w"> </span><span class="n">rcs</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">rcs_id</span><span class="p">,</span><span class="w"> </span><span class="n">rcs</span><span class="p">.</span><span class="n">geom</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">rcs_geom</span><span class="p">,</span><span class="w"> </span><span class="n">rcs</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">rcs_name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">lcs</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">rcs</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">lcs</span><span class="p">.</span><span class="n">cellId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rcs</span><span class="p">.</span><span class="n">cellId</span>
</code></pre></div>
<h3 id="3-optional-refine-the-result">3. Optional: Refine the result<a class="headerlink" href="#3-optional-refine-the-result" title="Permanent link">&para;</a></h3>
<p>Due to the nature of S2 Cellid, the equi-join results might have a few false-positives depending on the S2 level you choose. A smaller level indicates bigger cells, less exploded rows, but more false positives.</p>
<p>To ensure the correctness, you can use one of the <a href="../../../api/snowflake/vector-data/Predicate/">Spatial Predicates</a> to filter out them. Use this query instead of the query in Step 2.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">lcs</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">lcs_id</span><span class="p">,</span><span class="w"> </span><span class="n">lcs</span><span class="p">.</span><span class="n">geom</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">lcs_geom</span><span class="p">,</span><span class="w"> </span><span class="n">lcs</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">lcs_name</span><span class="p">,</span><span class="w"> </span><span class="n">rcs</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">rcs_id</span><span class="p">,</span><span class="w"> </span><span class="n">rcs</span><span class="p">.</span><span class="n">geom</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">rcs_geom</span><span class="p">,</span><span class="w"> </span><span class="n">rcs</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">rcs_name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">lcs</span><span class="p">,</span><span class="w"> </span><span class="n">rcs</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">lcs</span><span class="p">.</span><span class="n">cellId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rcs</span><span class="p">.</span><span class="n">cellId</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">ST_Contains</span><span class="p">(</span><span class="n">lcs</span><span class="p">.</span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="n">rcs</span><span class="p">.</span><span class="n">geom</span><span class="p">)</span>
</code></pre></div>
<p>As you see, compared to the query in Step 2, we added one more filter, which is <code>ST_Contains</code>, to remove false positives. You can also use <code>ST_Intersects</code> and so on.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can skip this step if you don't need 100% accuracy and want faster query speed.</p>
</div>
<h3 id="4-optional-de-duplicate">4. Optional: De-duplicate<a class="headerlink" href="#4-optional-de-duplicate" title="Permanent link">&para;</a></h3>
<p>Due to the <code>Flatten</code> function used when we generate S2 Cell Ids, the resulting DataFrame may have several duplicate <lcs_geom, rcs_geom> matches. You can remove them by performing a GroupBy query.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">lcs_id</span><span class="p">,</span><span class="w"> </span><span class="n">rcs_id</span><span class="p">,</span><span class="w"> </span><span class="n">ANY_VALUE</span><span class="p">(</span><span class="n">lcs_geom</span><span class="p">),</span><span class="w"> </span><span class="n">ANY_VALUE</span><span class="p">(</span><span class="n">lcs_name</span><span class="p">),</span><span class="w"> </span><span class="n">ANY_VALUE</span><span class="p">(</span><span class="n">rcs_geom</span><span class="p">),</span><span class="w"> </span><span class="n">ANY_VALUE</span><span class="p">(</span><span class="n">rcs_name</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">joinresult</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="p">(</span><span class="n">lcs_id</span><span class="p">,</span><span class="w"> </span><span class="n">rcs_id</span><span class="p">)</span>
</code></pre></div>
<p>The <code>ANY_VALUE</code> function is to take the first value from a number of duplicate values.</p>
<p>If you don't have a unique id for each geometry, you can also group by geometry itself. See below:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">lcs_geom</span><span class="p">,</span><span class="w"> </span><span class="n">rcs_geom</span><span class="p">,</span><span class="w"> </span><span class="n">ANY_VALUE</span><span class="p">(</span><span class="n">lcs_name</span><span class="p">),</span><span class="w"> </span><span class="n">ANY_VALUE</span><span class="p">(</span><span class="n">rcs_name</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">joinresult</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="p">(</span><span class="n">lcs_geom</span><span class="p">,</span><span class="w"> </span><span class="n">rcs_geom</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are doing point-in-polygon join, this is not a problem, and you can safely discard this issue. This issue only happens when you do polygon-polygon, polygon-linestring, linestring-linestring join.</p>
</div>
<h3 id="5-putting-it-all-together">5. Putting it all together<a class="headerlink" href="#5-putting-it-all-together" title="Permanent link">&para;</a></h3>
<p>The following queries creates 2 regions of interests and 5 different spatial queries in the form of bounding boxes in longitude, latitude. It then computes S2 coverings of both tables and merges on the S2 cell ID. A spatial filter can be applied to the original geometries to guarantee the exactness of the join.</p>
<p>The following example uses Snowflake's native <code>ST_GeogFromText</code> (treated as geographies), but also works with <code>ST_GeomFromText</code>. In both cases, note <code>SEDONA.ST_S2CellIDs</code> takes in a Snowflake <code>GEOGRAPHY</code> or <code>GEOMETRY</code> object along with an integer S2 precision.</p>
<div class="highlight"><pre><span></span><code><span class="c1">-- lng/lat format: no need to flip</span>
<span class="c1">-- lefts are area of interest (AOI)</span>
<span class="k">with</span><span class="w"> </span><span class="n">lefts</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="k">SELECT</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">poly_id_left</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">wkt</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="k">TABLE</span><span class="p">(</span>
<span class="w">      </span><span class="n">SPLIT_TO_TABLE</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="s1">&#39;POLYGON ((-74.64966372842101805 44.92318068906040196, -73.05513946490677313 44.92318068906040196, -73.05513946490677313 45.9127817308399031, -74.64966372842101805 45.9127817308399031, -74.64966372842101805 44.92318068906040196))|POLYGON ((-71.72125014775386376 46.58534825561803672, -70.72763860520016976 46.58534825561803672, -70.72763860520016976 47.26007441306773416, -71.72125014775386376 47.26007441306773416, -71.72125014775386376 46.58534825561803672))&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;|&#39;</span>
<span class="w">          </span><span class="p">)</span>
<span class="w">      </span><span class="p">)</span>

<span class="p">),</span>
<span class="c1">-- rights are queries</span>
<span class="c1">-- 1st polygon intersects both AOI</span>
<span class="c1">-- 2nd polygon contains both AOI</span>
<span class="c1">-- 3rd polygon is contained by AOI 1</span>
<span class="c1">-- 4th polygon touches AOI 1</span>
<span class="c1">-- 5th polygon is disjoint from both</span>
<span class="n">rights</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="k">SELECT</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">poly_id_right</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">wkt</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="k">TABLE</span><span class="p">(</span>
<span class="w">      </span><span class="n">SPLIT_TO_TABLE</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="s1">&#39;POLYGON ((-73.51160030163114811 45.54300066590783302, -71.31736631503980561 45.54300066590783302, -71.31736631503980561 46.82515071005796869, -73.51160030163114811 46.82515071005796869, -73.51160030163114811 45.54300066590783302))|POLYGON ((-75.26522832 44.23585380, -69.77500453509208 44.23585380, -69.77500453509208 47.59180373699041411, -75.26522832 47.59180373699041411, -75.26522832 44.23585380))|POLYGON ((-73.82001807503861812 45.0759163125215423, -73.34011383205873358 45.0759163125215423, -73.34011383205873358 45.35768613572972185, -73.82001807503861812 45.35768613572972185, -73.82001807503861812 45.0759163125215423))|POLYGON ((-74.64966372842101805 44.92318068906040196, -75.26522832 44.92318068906040196, -75.26522832 44.23585380, -74.64966372842101805 44.23585380, -74.64966372842101805 44.92318068906040196))|POLYGON ((-71.65791191749059408 44.19369241163229844, -70.2497216546401404 44.19369241163229844, -70.2497216546401404 44.96946189775351144, -71.65791191749059408 44.96946189775351144, -71.65791191749059408 44.19369241163229844))&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;|&#39;</span>
<span class="w">          </span><span class="p">)</span>
<span class="w">      </span><span class="p">)</span>
<span class="p">),</span>
<span class="c1">-- compute s2 cells covering the polyons for both tables</span>
<span class="c1">-- S2 discretizes the polygons, hence higher resolution yields more accurate queries, at the cost of increased computation</span>
<span class="c1">-- both tables need to be discretized at the same level - in this case 10</span>
<span class="n">lefts_s2</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">lefts</span><span class="p">,</span><span class="w"> </span><span class="k">TABLE</span><span class="p">(</span><span class="n">FLATTEN</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_S2CellIDs</span><span class="p">(</span><span class="n">ST_GeogFromText</span><span class="p">(</span><span class="n">lefts</span><span class="p">.</span><span class="n">wkt</span><span class="p">),</span><span class="w"> </span><span class="mi">10</span><span class="p">)))</span>
<span class="p">),</span>
<span class="n">rights_s2</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">rights</span><span class="p">,</span><span class="w"> </span><span class="k">TABLE</span><span class="p">(</span><span class="n">FLATTEN</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_S2CellIDs</span><span class="p">(</span><span class="n">ST_GeogFromText</span><span class="p">(</span><span class="n">rights</span><span class="p">.</span><span class="n">wkt</span><span class="p">),</span><span class="w"> </span><span class="mi">10</span><span class="p">)))</span>
<span class="p">)</span>
<span class="c1">-- merge on s2 index (int) and group by to retrieve the original polygons rather the the s2 cells</span>
<span class="c1">-- add the spatial predicate to be exact and omit if speed is more important</span>
<span class="c1">-- expect all queries except the 5th to match</span>
<span class="c1">-- expected result: 1 (touches) + 1 (contained) + 2 (intersect both) + 2 (contains both) = 6 rows total</span>
<span class="c1">-- AOI 1 (poly_id_left 1) should be present 4 times and AOI 2 (poly_id_left 2) should be present 2 times</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">rights_s2</span><span class="p">.</span><span class="n">wkt</span><span class="w"> </span><span class="p">,</span><span class="w">  </span><span class="n">lefts_s2</span><span class="p">.</span><span class="n">wkt</span><span class="p">,</span><span class="w"> </span><span class="n">LISTAGG</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">poly_id_right</span><span class="p">::</span><span class="nb">TEXT</span><span class="p">)</span><span class="w"> </span><span class="n">poly_id_right</span><span class="p">,</span><span class="w"> </span><span class="n">LISTAGG</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">poly_id_left</span><span class="p">::</span><span class="nb">TEXT</span><span class="p">)</span><span class="w"> </span><span class="n">poly_id_left</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">lefts_s2</span><span class="p">,</span><span class="n">rights_s2</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">rights_s2</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lefts_s2</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="n">ST_DISJOINT</span><span class="p">(</span><span class="n">ST_GeogFromText</span><span class="p">(</span><span class="n">rights_s2</span><span class="p">.</span><span class="n">wkt</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">ST_GeogFromText</span><span class="p">(</span><span class="w"> </span><span class="n">lefts_s2</span><span class="p">.</span><span class="n">wkt</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">rights_s2</span><span class="p">.</span><span class="n">wkt</span><span class="w"> </span><span class="p">,</span><span class="w">  </span><span class="n">lefts_s2</span><span class="p">.</span><span class="n">wkt</span>
</code></pre></div>
<p>In this case, omitting <code>not ST_DISJOINT(ST_GeogFromText(rights_s2.wkt) , ST_GeogFromText( lefts_s2.wkt ) )</code> yields the same results.</p>
<h3 id="s2-for-distance-join">S2 for distance join<a class="headerlink" href="#s2-for-distance-join" title="Permanent link">&para;</a></h3>
<p>This also works for distance join. You first need to use <code>SEDONA.ST_Buffer(geometry, distance)</code> to wrap one of your original geometry column. If your original geometry column contains points, this <code>SEDONA.ST_Buffer</code> will make them become circles with a radius of <code>distance</code>. Note that Snowflake does not implement a native <code>ST_Buffer</code> function.</p>
<p>Since the coordinates are in the longitude and latitude system, so the unit of <code>distance</code> should be degree instead of meter or mile. You can get an approximation by performing <code>METER_DISTANCE/111000.0</code>, then filter out false-positives. Note that this might lead to inaccurate results if your data is close to the poles or antimeridian.</p>
<p>In a nutshell, run this query first on the left table before Step 1. Please replace <code>METER_DISTANCE</code> with a meter distance. In Step 1, generate S2 IDs based on the <code>buffered_geom</code> column. Then run Step 2, 3, 4 on the original <code>geom</code> column.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_Buffer</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="n">METER_DISTANCE</span><span class="o">/</span><span class="mi">111000</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">buffered_geom</span><span class="p">,</span><span class="w"> </span><span class="n">name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">lefts</span>
</code></pre></div>
<h2 id="functions-that-are-only-available-in-sedona">Functions that are only available in Sedona<a class="headerlink" href="#functions-that-are-only-available-in-sedona" title="Permanent link">&para;</a></h2>
<p>Sedona implements over 200 geospatial vector and raster functions, which are much more than what Snowflake native functions offer. For example:</p>
<ul>
<li><a href="../../../api/snowflake/vector-data/Function/#st_3ddistance">SEDONA.ST_3DDistance</a></li>
<li><a href="../../../api/snowflake/vector-data/Function/#st_force_2d">SEDONA.ST_Force2D</a></li>
<li><a href="../../../api/snowflake/vector-data/Function/#st_geometryn">SEDONA.ST_GeometryN</a></li>
<li><a href="../../../api/snowflake/vector-data/Function/#st_makevalid">SEDONA.ST_MakeValid</a></li>
<li><a href="../../../api/snowflake/vector-data/Function/#st_multi">SEDONA.ST_Multi</a></li>
<li><a href="../../../api/snowflake/vector-data/Function/#st_numgeometries">SEDONA.ST_NumGeometries</a></li>
<li><a href="../../../api/snowflake/vector-data/Function/#st_reduceprecision">SEDONA.ST_ReducePrecision</a></li>
<li><a href="../../../api/snowflake/vector-data/Function/#st_subdivideexplode">SEDONA.ST_SubdivideExplode</a></li>
</ul>
<p>You can click the links above to learn more about these functions. More functions can be found in <a href="../../../api/snowflake/vector-data/Function/">SedonaSQL API</a>.</p>
<h2 id="interoperate-with-snowflake-native-functions">Interoperate with Snowflake native functions<a class="headerlink" href="#interoperate-with-snowflake-native-functions" title="Permanent link">&para;</a></h2>
<p>Sedona can interoperate with Snowflake native functions seamlessly. There are two ways to do this:</p>
<ul>
<li>Use <code>Sedona functions</code> to create a Geometry column, then use Snowflake native functions and Sedona functions to query it.</li>
<li>Use <code>Snowflake native functions</code> to create a Geometry/Geography column, then use Snowflake native functions and Sedona functions to query it.</li>
</ul>
<p>Now we will show you how to do this.</p>
<h3 id="geometries-created-by-sedona-geometry-constructors">Geometries created by Sedona Geometry constructors<a class="headerlink" href="#geometries-created-by-sedona-geometry-constructors" title="Permanent link">&para;</a></h3>
<p>In this case, Sedona uses EWKB type as the input/output type for geometry. If you have datasets of built-in Snowflake GEOMETRY/GEOGRAPHY type, you can easily transform them into EWKB through this function.</p>
<h4 id="from-snowflake-native-functions-to-sedona-functions">From Snowflake native functions to Sedona functions<a class="headerlink" href="#from-snowflake-native-functions-to-sedona-functions" title="Permanent link">&para;</a></h4>
<p>In this example, <code>SEDONA.ST_X</code> is a Sedona function, <code>ST_GeommetryFromWkt</code> and <code>ST_AsEWKB</code> are Snowflake native functions.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_X</span><span class="p">(</span><span class="n">ST_AsEWKB</span><span class="p">(</span><span class="n">ST_GeometryFromWkt</span><span class="p">(</span><span class="s1">&#39;POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))&#39;</span><span class="p">)))</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="err">{{</span><span class="w"> </span><span class="n">geometry_table</span><span class="w"> </span><span class="err">}}</span><span class="p">;</span>
</code></pre></div>
<h4 id="from-sedona-functions-to-snowflake-native-functions">From Sedona functions to Snowflake native functions<a class="headerlink" href="#from-sedona-functions-to-snowflake-native-functions" title="Permanent link">&para;</a></h4>
<p>In this example, <code>SEDONA.ST_GeomFromText</code> is a Sedona function, <code>ST_AREA</code> and <code>to_geometry</code> are Snowflake native functions.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">ST_AREA</span><span class="p">(</span><span class="n">to_geometry</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="s1">&#39;POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))&#39;</span><span class="p">)));</span>
</code></pre></div>
<h4 id="pros">Pros:<a class="headerlink" href="#pros" title="Permanent link">&para;</a></h4>
<p>Sedona geometry constructors are more powerful than Snowflake native functions. It has the following advantages:</p>
<ul>
<li>Sedona offers more constructors especially for 3D (XYZ) geometries, but Snowflake native functions don't.</li>
<li>WKB serialization is more efficient. If you need to use multiple Sedona functions, it is more efficient to use this method, which might bring in 2X performance improvement.</li>
<li>SRID information of geometries is preserved. The method below will lose SRID information.</li>
</ul>
<h3 id="geometry-geography-created-by-snowflake-geometry-geography-constructors">Geometry / Geography created by Snowflake Geometry / Geography constructors<a class="headerlink" href="#geometry-geography-created-by-snowflake-geometry-geography-constructors" title="Permanent link">&para;</a></h3>
<p>In this case, Sedona uses Snowflake native GEOMETRY/GEOGRAPHY type as the input/output type for geometry. The serialization format is GeoJSON string.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">ST_AREA</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_Buffer</span><span class="p">(</span><span class="n">ST_GeometryFromWkt</span><span class="p">(</span><span class="s1">&#39;POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))&#39;</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
</code></pre></div>
<p>In this example, <code>SEDONA.ST_Buffer</code> is a Sedona function, <code>ST_GeommetryFromWkt</code> and <code>ST_AREA</code> are Snowflake native functions.</p>
<p>As you can see, you can use Sedona functions and Snowflake native functions together without explicit conversion.</p>
<h4 id="pros_1">Pros:<a class="headerlink" href="#pros_1" title="Permanent link">&para;</a></h4>
<ul>
<li>You don't need to convert the geometry type, which is more convenient.</li>
</ul>
<p>Note that: Snowflake natively serializes Geometry type data to GeoJSON String and sends to UDF as input. GeoJSON spec does not include SRID. So the SRID information will be lost if you mix-match Snowflake functions and Sedona functions directly without using <code>WKB</code>.</p>
<p>In the example below, the SRID=4326 information is lost.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">ST_AsEWKT</span><span class="p">(</span><span class="n">SEDONA</span><span class="p">.</span><span class="n">ST_SetSRID</span><span class="p">(</span><span class="n">ST_GeometryFromWKT</span><span class="p">(</span><span class="s1">&#39;POINT(1 2)&#39;</span><span class="p">),</span><span class="w"> </span><span class="mi">4326</span><span class="p">))</span>
</code></pre></div>
<p>Output:</p>
<div class="highlight"><pre><span></span><code>SRID=0;POINT(1 2)
</code></pre></div>
<h2 id="known-issues">Known issues<a class="headerlink" href="#known-issues" title="Permanent link">&para;</a></h2>
<ol>
<li>Sedona Snowflake doesn't support <code>M</code> dimension due to the limitation of WKB serialization. Sedona Spark and Sedona Flink support XYZM because it uses our in-house serialization format. Although Sedona Snowflake has functions related to <code>M</code> dimension, all <code>M</code> values will be ignored.</li>
<li>Sedona H3 functions are not supported because Snowflake does not allow embedded C code in UDF.</li>
<li>All User Defined Table Functions only work with geometries created by Sedona constructors due to Snowflake current limitation <code>Data type GEOMETRY is not supported in non-SQL UDTF return type</code>. This includes:<ul>
<li>SEDONA.ST_MinimumBoundingRadius</li>
<li>SEDONA.ST_Intersection_Aggr</li>
<li>SEDONA.ST_SubDivideExplode</li>
<li>SEDONA.ST_Envelope_Aggr</li>
<li>SEDONA.ST_Union_Aggr</li>
<li>SEDONA.ST_Collect</li>
<li>SEDONA.ST_Dump</li>
</ul>
</li>
<li>Only Sedona ST functions are available in Snowflake. Raster functions (RS functions) are not available in Snowflake yet.</li>
</ol>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="May 28, 2025 17:56:17 UTC">May 28, 2025 17:56:17</span>
  </span>

    
    
    
    
  </aside>





                
  

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../flink/pyflink-sql/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Spatial SQL app (PyFlink)">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Spatial SQL app (PyFlink)
              </div>
            </div>
          </a>
        
        
          
          <a href="../../demo/" class="md-footer__link md-footer__link--next" aria-label="Next: Scala/Java">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Scala/Java
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright  2025 The Apache Software Foundation. Apache Sedona, Sedona, Apache, the Apache feather logo, and the Apache Sedona project logo are either registered trademarks or trademarks of The Apache Software Foundation in the United States and other countries. All other marks mentioned may be trademarks or registered trademarks of their respective owners. Please visit <a href="https://www.apache.org/">Apache Software Foundation</a> for more details.<img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=f3e121f6-c909-4592-8be6-5bd345768cba" /><img referrerpolicy="no-referrer-when-downgrade" src="https://analytics.apache.org/matomo.php?idsite=74&rec=1" />
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/apache/sedona" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/ApacheSedona" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://discord.gg/9A3k5dEBsY" target="_blank" rel="noopener" title="discord.gg" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.action.edit", "search.highlight", "search.share", "search.suggest", "navigation.footer", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": ["latest"], "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>